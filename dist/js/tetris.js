!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n,i){if(o(this,e),this.canvasId=t,this.el=document.getElementById(t),!this.el)throw new Error("Must provider a right id.");this.context=this.el.getContext("2d"),this.width=n,this.height=i,this._init()}return i(e,[{key:"_init",value:function(){this.el.width=this.width,this.el.height=this.height}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;this.context.clearRect(e,t,n,o)}},{key:"drawText",value:function(e,t,n){this.clear(0,0),this.context.font="25px Arial",this.context.fillStyle="purple",this.context.textAlign="center",this.context.fillText(e,void 0===t?this.width/2:t,void 0===n?45:n)}}]),e}();e.exports=r},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(){$("#btn-start").on("click",function(e){$(".start-container").css("display","none"),$(".game-container").css("display","block"),$("#gamepad").css("display","block"),i()}),$("#btn-setting").on("click",function(e){alert("Setting")}),$("#btn-game-pause").on("click",function(e){var t=e.target;"over"!==c._state&&("暂停"===t.innerText?(t.innerText="继续",c.pause()):(t.innerText="暂停",c.resume()))})}function i(){ResourceManager.onResourceLoaded=function(){c=new a.default,c.startGame()},ResourceManager.init()}var r=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(r);n(30),n(31),n(32),n(33);var s=n(34),u=new s,c=void 0;(screen.width<481||window.screen.width<481)&&u.draw(),document.addEventListener("DOMContentLoaded",function(e){o()})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(19),s=o(a),u=n(22),c=o(u),d=n(23),l=o(d),_=n(24),f=o(_),h=n(25),p=o(h),v=n(26),y=o(v);n(27);var m=function(){function e(){i(this,e),this.scroe=new l.default,this.timer=new f.default,this.level=new p.default,this.nextshape=new y.default,this.sound=new Howl({src:["audio/bg.wav"],loop:!0,volume:.3}),this._state="playing",this.board=new s.default(this),this.keyControl=new c.default(this.board)}return r(e,[{key:"startGame",value:function(){this.keyControl.init(),this.sound.play(),this._startTick()}},{key:"_startTick",value:function(){var e=this;window.TetrisConfig.intervalId=window.setInterval(function(){e.board.tick()},window.TetrisConfig.speed)}},{key:"_stopTick",value:function(){window.clearInterval(window.TetrisConfig.intervalId)}},{key:"resume",value:function(){this.sound.play(),this._state="playing",this._startTick(),this.timer.resume()}},{key:"pause",value:function(){this.sound.pause(),this._state="pause",this._stopTick(),this.timer.pause()}},{key:"endGame",value:function(){console.log("结束"),this.sound.pause(),this._stopTick(),this.timer.stop()}}]),e}();e.exports=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=o(a),u=n(20),c=o(u),d=function(){function e(t){i(this,e),this.blockSize=30,this.rows=20,this.cols=13,screen.width<481&&(this.blockSize=(.98*screen.width-80)/this.cols),this.canvas=new s.default("c_game_main",this.cols*this.blockSize,this.rows*this.blockSize),this.context=this.canvas.context,this.boardList=[],this.shape=new c.default,this.gameInst=t,this._init()}return r(e,[{key:"_init",value:function(){this._buildGridData(),this._initGrid(),this.shape.draw(this.context,this.blockSize);var e=this;setTimeout(function(){e._bulidNextShape()})}},{key:"_bulidNextShape",value:function(){this.nextShape=new c.default,this.nextShape.setPosition(this.gameInst.nextshape.cols,this.gameInst.nextshape.rows),this.gameInst.nextshape.render(this.nextShape)}},{key:"_buildGridData",value:function(){for(var e=0;e<this.rows;e++){this.boardList[e]=[];for(var t=0;t<this.cols;t++)this.boardList[e][t]=0}}},{key:"_initGrid",value:function(){var e=void 0;for(this.context.strokeStyle="green",this.context.lineWidth=.5,e=0;e<this.rows;e++)this.context.moveTo(0,e*this.blockSize),this.context.lineTo(this.canvas.width,e*this.blockSize);for(e=0;e<this.rows;e++)this.context.moveTo(e*this.blockSize,0),this.context.lineTo(e*this.blockSize,this.canvas.height);this.context.stroke(),this.gridImageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}},{key:"tick",value:function(){if(this.validMove(0,1))this.shape.y+=1;else{if(this.addShapeToBoardList(),"over"===this.gameInst._state)return void this.gameInst.endGame();this.clearFullRows(),this.shape=this.nextShape,this._bulidNextShape()}this.refresh(),this.shape.draw(this.context,this.blockSize)}},{key:"refresh",value:function(){this.canvas.clear(),this.context.putImageData(this.gridImageData,0,0),this.drawBlock()}},{key:"validMove",value:function(e,t){for(var n=this.shape.x+e,o=this.shape.y+t,i=0;i<this.shape.layout.length;i++)for(var r=0;r<this.shape.layout[i].length;r++)if(this.shape.layout[i][r]&&(void 0===this.boardList[o+i]||void 0===this.boardList[o+i][n+r]||this.boardList[o+i][n+r]||n+r<0||n+r>=this.cols||o+i>=this.rows))return!1;return!0}},{key:"addShapeToBoardList",value:function(){for(var e=0;e<this.shape.layout.length;e++)for(var t=0;t<this.shape.layout[e].length;t++)if(this.shape.layout[e][t]){var n=this.shape.x+t,o=this.shape.y+e;if(this.boardList[o][n])return void(this.gameInst._state="over");this.boardList[o][n]=this.shape.blockType}}},{key:"drawBlock",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)this.boardList[e][t]&&this.shape.block.draw(this.context,t,e,this.boardList[e][t])}},{key:"clearFullRows",value:function(){for(var e=0,t=this,n=new Array(this.cols).fill(0),o=this.rows-1;o>=0;o--){this.boardList[o].filter(function(e){return e>0}).length===this.cols&&o&&(this.boardList.splice(o,1),this.boardList.unshift(n),e++,o++)}var i=100*e,r=this.gameInst.scroe.addScore(i),a=this.gameInst.level.checkLevel(r);a&&(window.TetrisConfig.speed=Math.floor(window.TetrisConfig.constSpeed*(1-(a-1)/10)),this.gameInst.pause(),setTimeout(function(){window.alert("恭喜你，升级了！"),t.gameInst.resume()}))}}]),e}();e.exports=d},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(21),a=function(e,t){return e+Math.floor(Math.random()*t)},s=[[[0,1,0],[1,1,1]],[[1,1,1,1]],[[1,1],[1,1]],[[0,1],[1,1],[1,0]],[[1,0],[1,1],[0,1]],[[1,0,1],[1,1,1]],[[0,1],[1,1]],[[1,1]],[[1,1],[1,0],[1,0]],[[1,1],[0,1],[0,1]]],u=7,c=function(){function e(){o(this,e),this.x=0,this.y=0,this.blockType=a(1,u),this.block=new r(this.blockType),this.layout=s[a(0,s.length)],this.oldlayout}return i(e,[{key:"draw",value:function(e,t){for(var n=0;n<this.layout.length;n++)for(var o=0;o<this.layout[n].length;o++)this.layout[n][o]&&this.block.draw(e,o+this.x,n+this.y,void 0,t)}},{key:"rotate",value:function(){this.oldlayout=this.layout;for(var e=[],t=0;t<this.layout[0].length;t++){e[t]=[];for(var n=0;n<this.layout.length;n++)e[t][n]=this.layout[this.layout.length-1-n][t]}this.layout=e,this._setLayout()}},{key:"_setLayout",value:function(){this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.layout[0].length>TetrisConfig.cols&&(this.x=TetrisConfig.cols-this.layout[0].length),this.y+this.layout.length>TetrisConfig.rows&&(this.y=TetrisConfig.rows-this.layout.length)}},{key:"_returnLayout",value:function(){this.layout=this.oldlayout}},{key:"_getMaxCols",value:function(){for(var e=0,t=0;t<this.layout.length;t++)e=Math.max(e,this.layout[t].length);return e}},{key:"_getMaxRows",value:function(){return this.layout.length}},{key:"setPosition",value:function(e,t,n){this.x=Math.floor((e-this._getMaxCols())/2),n||(this.y=Math.floor((t-this._getMaxRows())/2))}}]),e}();e.exports=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){o(this,e),this.blockType=t,this.size=30,this.originalSize=32,this.sprite=window.ResourceManager.getResource("blocks")}return i(e,[{key:"draw",value:function(e,t,n,o,i){i=i||this.size,e.drawImage(this.sprite,((o||this.blockType)-1)*this.originalSize,0,this.originalSize,this.originalSize,t*i,n*i,i,i)}}]),e}();e.exports=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r={38:"top",39:"right",40:"down",37:"left"},a=function(){function e(t){o(this,e),this.board=t}return i(e,[{key:"init",value:function(){var e=this;document.addEventListener("keydown",function(t){e.processKeyDown(t)})}},{key:"processKeyDown",value:function(e){"playing"===this.board.gameInst._state&&r[e.keyCode]&&this.press(r[e.keyCode])}},{key:"press",value:function(e){var t=!1;switch(e){case"top":this.board.shape.rotate(),this.board.validMove(0,0)?t=!0:this.board.shape._returnLayout();break;case"right":this.board.validMove(1,0)&&(this.board.shape.x+=1,t=!0);break;case"down":this.board.validMove(0,1)&&(this.board.shape.y+=1,t=!0);break;case"left":this.board.validMove(-1,0)&&(this.board.shape.x-=1,t=!0)}if(t&&(this.board.refresh(),this.board.shape.draw(this.board.context),"down"===e)){var n=this;window.clearInterval(window.TetrisConfig.intervalId),window.TetrisConfig.intervalId=window.setInterval(function(){n.board.tick()},window.TetrisConfig.speed)}}}]),e}();e.exports=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){o(this,e),this.canvas=new a.default("score",100,70),this.score=0,this._init()}return i(e,[{key:"_init",value:function(){this._render()}},{key:"_render",value:function(){this.canvas.drawText(this.score)}},{key:"addScore",value:function(e){return this.score+=e,this._render(),this.score}}]),e}();e.exports=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){o(this,e),this.canvas=new a.default("timer",100,70),this.time=0,this.timerId,this._init()}return i(e,[{key:"_init",value:function(){this._render(),this.resume()}},{key:"_format",value:function(e){var t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60);return e-=60*n,t<10&&(t="0"+t),n<10&&(n="0"+n),e<10&&(e="0"+e),t+":"+n+":"+e}},{key:"_render",value:function(){this.canvas.drawText(this._format(this.time))}},{key:"pause",value:function(){window.clearInterval(this.timerId)}},{key:"resume",value:function(){var e=this;this.timerId=window.setInterval(function(){e.time+=1,e._render()},1e3)}},{key:"stop",value:function(){this.pause()}}]),e}();e.exports=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){for(var e=new Array,t=0;t<10;t++)e.push(1e3*Math.pow(2,t));return e}(),u=function(){function e(){o(this,e),this.canvas=new a.default("level",100,70),this.level=1,this._init(),console.log(s)}return i(e,[{key:"_init",value:function(){this._render()}},{key:"_render",value:function(){this.canvas.drawText("Level"+this.level)}},{key:"checkLevel",value:function(e){return e>=s[this.level-1]?(this.level++,this._render(),this.level):0}}]),e}();e.exports=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:70;o(this,e),this.canvas=new a.default("nextshape",t,n),this._init()}return i(e,[{key:"_init",value:function(){this.rows=4,this.cols=6}},{key:"render",value:function(e){this.canvas.clear(),e.draw(this.canvas.context,16)}}]),e}();e.exports=s},function(e,t,n){"use strict";(function(o){var i,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! howler.js v2.0.0 | (c) 2013-2016, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){var a=function(){this.init()};a.prototype={init:function(){var e=this||s;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||s;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var r=t._howls[n]._soundById(o[i]);r&&r._node&&(r._node.volume=r._volume*e)}return t}return t._volume},mute:function(e){var t=this||s;t.ctx||p(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var r=t._howls[n]._soundById(o[i]);r&&r._node&&(r._node.muted=!!e||r._muted)}return t},unload:function(){for(var e=this||s,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||s)._codecs[e]},_setup:function(){var e=this||s;return e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||s,t="undefined"!=typeof Audio?new Audio:null;if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||s,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function t(){var n=e.ctx.createBufferSource();n.buffer=e._scratchBuffer,n.connect(e.ctx.destination),void 0===n.start?n.noteOn(0):n.start(0),n.onended=function(){n.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",t,!0)}};return document.addEventListener("touchend",o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&s.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running"}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var s=new a,u=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};u.prototype={init:function(e){var t=this;return s.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._webAudio=s.usingWebAudio&&!t._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(t),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(s.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var o,i;if(e._format&&e._format[n])o=e._format[n];else{if("string"!=typeof(i=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=/^data:audio\/([^;,]+);/i.exec(i),o||(o=/\.([^.]+)$/.exec(i.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(s.codecs(o)){t=e._src[n];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new c(e),e._webAudio&&l(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var i=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(i++,o=n._sounds[r]._id);1===i?e=null:o=null}}var a=o?n._soundById(o):n._inactiveSound();if(!a)return null;if(o&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state&&!n._sprite[e])return n._queue.push({event:"play",action:function(){n.play(n._soundById(a._id)?a._id:void 0)}}),a._id;if(o&&!a._paused)return t||setTimeout(function(){n._emit("play",a._id)},0),a._id;n._webAudio&&s._autoResume();var u=a._seek>0?a._seek:n._sprite[e][0]/1e3,c=(n._sprite[e][0]+n._sprite[e][1])/1e3-u,d=1e3*c/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=e,a._seek=u,a._start=n._sprite[e][0]/1e3,a._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,a._loop=!(!a._loop&&!n._sprite[e][2]);var l=a._node;if(n._webAudio){var _=function(){n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;l.gain.setValueAtTime(e,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===l.bufferSource.start?a._loop?l.bufferSource.noteGrainOn(0,u,86400):l.bufferSource.noteGrainOn(0,u,c):a._loop?l.bufferSource.start(0,u,86400):l.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d)),t||setTimeout(function(){n._emit("play",a._id)},0)};"loaded"===n._state?_():(n.once("load",_,a._id),n._clearTimer(a._id))}else{var f=function(){l.currentTime=u,l.muted=a._muted||n._muted||s._muted||l.muted,l.volume=a._volume*s.volume(),l.playbackRate=a._rate,setTimeout(function(){l.play(),d!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d)),t||n._emit("play",a._id)},0)},h="loaded"===n._state&&(window&&window.ejecta||!l.readyState&&s._navigator.isCocoonJS);if(4===l.readyState||h)f();else{var p=function e(){f(),l.removeEventListener(s._canPlayEvent,e,!1)};l.addEventListener(s._canPlayEvent,p,!1),n._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var i=t._soundById(n[o]);if(i&&!i._paused){if(i._seek=t.seek(n[o]),i._rateSeek=0,i._paused=!0,t._stopFade(n[o]),i._node)if(t._webAudio){if(!i._node.bufferSource)return t;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i._id)}}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),i=0;i<o.length;i++){n._clearTimer(o[i]);var r=n._soundById(o[i]);if(r&&!r._paused&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(o[i]),r._node))if(n._webAudio){if(!r._node.bufferSource)return n;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause());r&&!t&&n._emit("stop",r._id)}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),i=0;i<o.length;i++){var r=n._soundById(o[i]);r&&(r._muted=e,n._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,s.ctx.currentTime):r._node&&(r._node.muted=!!s._muted||e),n._emit("mute",r._id))}return n},volume:function(){var e,t,n=this,o=arguments;if(0===o.length)return n._volume;if(1===o.length){n._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var i;if(!(void 0!==e&&e>=0&&e<=1))return i=t?n._soundById(t):n._sounds[0],i?i._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var r=0;r<t.length;r++)(i=n._soundById(t[r]))&&(i._volume=e,o[2]||n._stopFade(t[r]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,s.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*s.volume()),n._emit("volume",i._id));return n},fade:function(e,t,n,o){var i=this,r=Math.abs(e-t),a=e>t?"out":"in",u=r/.01,c=n/u;if("loaded"!==i._state)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,o)}}),i;i.volume(e,o);for(var d=i._getSoundIds(o),l=0;l<d.length;l++){var _=i._soundById(d[l]);if(_){if(o||i._stopFade(d[l]),i._webAudio&&!_._muted){var f=s.ctx.currentTime,h=f+n/1e3;_._volume=e,_._node.gain.setValueAtTime(e,f),_._node.gain.linearRampToValueAtTime(t,h)}var p=e;_._interval=setInterval(function(e,n){p+="in"===a?.01:-.01,p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,i._webAudio?(void 0===o&&(i._volume=p),n._volume=p):i.volume(p,e,!0),p===t&&(clearInterval(n._interval),n._interval=null,i.volume(p,e),i._emit("fade",e))}.bind(i,d[l],_),c)}}return i},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,t._emit("fade",e)),t},loop:function(){var e,t,n,o=this,i=arguments;if(0===i.length)return o._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=o._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],o._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var r=o._getSoundIds(t),a=0;a<r.length;a++)(n=o._soundById(r[a]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e));return o},rate:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var i=n._getSoundIds(),r=i.indexOf(o[0]);r>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var a;if("number"!=typeof e)return a=n._soundById(t),a?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)if(a=n._soundById(t[u])){a._rateSeek=n.seek(t[u]),a._playStart=n._webAudio?s.ctx.currentTime:a._playStart,a._rate=e,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=e:a._node&&(a._node.playbackRate=e);var c=n.seek(t[u]),d=(n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-c,l=1e3*d/Math.abs(a._rate);!n._endTimers[t[u]]&&a._paused||(n._clearTimer(t[u]),n._endTimers[t[u]]=setTimeout(n._ended.bind(n,a),l)),n._emit("rate",a._id)}return n},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var i=n._getSoundIds(),r=i.indexOf(o[0]);r>=0?t=parseInt(o[0],10):(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?s.ctx.currentTime-a._playStart:0,c=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(c+u*Math.abs(a._rate))}return a._node.currentTime}var d=n.playing(t);d&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),d&&n.play(t,!0),!n._webAudio&&a._node&&(a._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||(e.stop(t[n]._id),e._emit("end",t[n]._id)),e._webAudio||(t[n]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(s._canPlayEvent,t[n]._loadFn,!1)),delete t[n]._node,e._clearTimer(t[n]._id);var o=s._howls.indexOf(e);o>=0&&s._howls.splice(o,1)}var i=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===e._src){i=!1;break}return d&&i&&delete d[e._src],e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var i=this,r=i["_on"+e];return"function"==typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),i},off:function(e,t,n){var o=this,i=o["_on"+e],r=0;if(t){for(r=0;r<i.length;r++)if(t===i[r].fn&&n===i[r].id){i.splice(r,1);break}}else if(e)o["_on"+e]=[];else{var a=Object.keys(o);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(o[a[r]])&&(o[a[r]]=[])}return o},once:function(e,t,n){var o=this;return o.on(e,t,n,1),o},_emit:function(e,t,n){for(var o=this,i=o["_on"+e],r=i.length-1;r>=0;r--)i[r].id&&i[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,i[r].fn),0),i[r].once&&o.off(e,i[r].fn,i[r].id));return o},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,n=e._sprite,o=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),s._autoSuspend()),t._webAudio||o||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new c(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(n<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var n=[],o=0;o<t._sounds.length;o++)n.push(t._sounds[o]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=d[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,t}};var c=function(e){this._parent=e,this.init()};c.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=s._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),e._node.gain.setValueAtTime(n,s.ctx.currentTime),e._node.paused=!0,e._node.connect(s.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(s._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=n*s.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(s.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),t._autoplay&&t.play(),e._node.removeEventListener(s._canPlayEvent,e._loadFn,!1)}};var d={},l=function(e){var t=e._src;if(d[t])return e._duration=d[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),i=0;i<n.length;++i)o[i]=n.charCodeAt(i);f(o.buffer,e)}else{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){var t=(r.status+"")[0];return"0"!==t&&"2"!==t&&"3"!==t?void e._emit("loaderror",null,"Failed loading audio file with status: "+r.status+"."):void f(r.response,e)},r.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[t],e.load())},_(r)}},_=function(e){try{e.send()}catch(t){e.onerror()}},f=function(e,t){s.ctx.decodeAudioData(e,function(e){e&&t._sounds.length>0&&(d[t._src]=e,h(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),e._autoplay&&e.play()},p=function(){s.noAudio=!1;try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(e){s.usingWebAudio=!1}if(!s.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;void 0===e.oncanplaythrough&&(s._canPlayEvent="canplay")}catch(e){s.noAudio=!0}else s.noAudio=!0;try{var e=new Audio;e.muted&&(s.noAudio=!0)}catch(e){}var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),n=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(t&&o&&o<9){var i=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!i||s._navigator&&!s._navigator.standalone&&!i)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=1,s.masterGain.connect(s.ctx.destination)),s._setup()};n(29)&&(i=[],void 0!==(r=function(){return{Howler:s,Howl:u}}.apply(t,i))&&(e.exports=r)),void 0!==t&&(t.Howler=s,t.Howl=u),"undefined"!=typeof window?(window.HowlerGlobal=a,window.Howler=s,window.Howl=u,window.Sound=c):void 0!==o&&(o.HowlerGlobal=a,o.Howler=s,o.Howl=u,o.Sound=c)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var o=this;return o.ctx&&o.ctx.listener?(t="number"!=typeof t?o._pos[1]:t,n="number"!=typeof n?o._pos[2]:n,"number"!=typeof e?o._pos:(o._pos=[e,t,n],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,n,o,i,r){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,o="number"!=typeof o?s[3]:o,i="number"!=typeof i?s[4]:i,r="number"!=typeof r?s[5]:r,"number"!=typeof e?s:(a._orientation=[e,t,n,o,i,r],a.ctx.listener.setOrientation(e,t,n,o,i,r),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(t,n)}}),o;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0]}for(var r=o._getSoundIds(n),a=0;a<r.length;a++){var s=o._soundById(r[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?s._panner.setPosition(t,0,0):s._panner.pan.value=t),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(t,n,o,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,n,o,i)}}),r;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===i){if("number"!=typeof t)return r._pos;r._pos=[t,n,o]}for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var u=r._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,o],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(t,n,o)),r._emit("pos",u._id)}}return r},Howl.prototype.orientation=function(t,n,o,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,n,o,i)}}),r;if(n="number"!=typeof n?r._orientation[1]:n,o="number"!=typeof o?r._orientation[2]:o,void 0===i){if("number"!=typeof t)return r._orientation;r._orientation=[t,n,o]}for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var u=r._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,o],u._node&&(u._panner||(u._pos||(u._pos=r._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(t,n,o)),r._emit("orientation",u._id)}}return r},Howl.prototype.pannerAttr=function(){var t,n,o,i=this,r=arguments;if(!i._webAudio)return i;if(0===r.length)return i._pannerAttr;if(1===r.length){if("object"!=a(r[0]))return o=i._soundById(parseInt(r[0],10)),o?o._pannerAttr:i._pannerAttr;t=r[0],void 0===n&&(i._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:i._distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:i._maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:i._panningModel,refDistance:void 0!==t.refDistance?t.refDistance:i._refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:i._rolloffFactor})}else 2===r.length&&(t=r[0],n=parseInt(r[1],10));for(var s=i._getSoundIds(n),u=0;u<s.length;u++)if(o=i._soundById(s[u])){var c=o._pannerAttr;c={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:c.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:c.maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:c.panningModel,refDistance:void 0!==t.refDistance?t.refDistance:c.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:c.rolloffFactor};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.panningModel=c.panningModel,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor):(o._pos||(o._pos=i._pos||[0,0,-.5]),e(o,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(t,n(28))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){},function(e,t,n){"use strict";!function(e){function t(e){this.dom=e}t.prototype.get=function(){return this.dom},t.prototype.on=function(e,t){this.get().addEventListener(e,t)},t.prototype.css=function(e,t){this.get().style[e]=t},window.$=function(n,o){return console.log("selector",n),new t((o||e).querySelector(n))}}(document),CanvasRenderingContext2D.prototype.sector=function(e,t,n,o,i){return this.beginPath(),this.moveTo(e,t),this.arc(e,t,n,o,i),this.closePath(),this}},function(e,t,n){"use strict";!function(e){var t=new Map,n=0,o=function(){1===(n+=1)&&"function"==typeof e.ResourceManager.onResourceLoaded&&e.ResourceManager.onResourceLoaded()},i=function(){var e=new Image;e.onload=function(){t.set("blocks",e),o()},e.src="img/tetris/blocks.png"},r=function(e){return t.get(e)};e.ResourceManager={getResource:r,init:i,onResourceLoaded:null}}(window)},function(e,t,n){"use strict";!function(e){e.TetrisConfig={rows:20,cols:13,speed:1e3,constSpeed:1e3,intervalId:0,config:{}}}(window)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.can=document.getElementById("gamepad"),this.ctx=this.can.getContext("2d"),this.can.width=screen.width,this.w=this.can.width}return i(e,[{key:"draw",value:function(){this.ctx.save(),this.ctx.strokeStyle="#0000ff",this.ctx.sector(75,75,50,1.775*Math.PI,.225*Math.PI),this.ctx.stroke(),this.ctx.sector(75,75,50,.275*Math.PI,.725*Math.PI),this.ctx.stroke(),this.ctx.sector(75,75,50,.775*Math.PI,1.225*Math.PI),this.ctx.stroke(),this.ctx.sector(75,75,50,1.275*Math.PI,1.725*Math.PI),this.ctx.stroke(),this.ctx.restore(),this.ctx.save(),this.ctx.fillStyle="#FF0000",this.ctx.beginPath(),this.ctx.arc(this.w-120,60,15,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.font="10px Georgia",this.ctx.fillText("Pause",this.w-100,65),this.ctx.restore(),this.ctx.save(),this.ctx.fillStyle="#0000ff",this.ctx.beginPath(),this.ctx.arc(this.w-80,100,15,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.font="10px Georgia",this.ctx.fillText("Setting",this.w-60,105),this.ctx.restore();var e=this;this.can.addEventListener("click",function(t){e.reDraw(e.getPosition(t))},!1)}},{key:"reDraw",value:function(e){var t=null;return this.ctx.save(),this.ctx.strokeStyle="#0000ff",this.ctx.sector(75,75,50,1.775*Math.PI,.225*Math.PI),this.ctx.isPointInPath(e.x,e.y)&&(t="right"),this.ctx.stroke(),this.ctx.sector(75,75,50,.275*Math.PI,.725*Math.PI),this.ctx.isPointInPath(e.x,e.y)&&(t="down"),this.ctx.stroke(),this.ctx.sector(75,75,50,.775*Math.PI,1.225*Math.PI),this.ctx.isPointInPath(e.x,e.y)&&(t="left"),this.ctx.stroke(),this.ctx.sector(75,75,50,1.275*Math.PI,1.725*Math.PI),this.ctx.isPointInPath(e.x,e.y)&&(t="up"),this.ctx.stroke(),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle="#FF0000",this.ctx.lineWidth=0,this.ctx.beginPath(),this.ctx.arc(this.w-120,60,15,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.isPointInPath(e.x,e.y)&&(t="pause"),this.ctx.stroke(),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle="#0000ff",this.ctx.lineWidth=0,this.ctx.beginPath(),this.ctx.arc(this.w-80,100,15,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.isPointInPath(e.x,e.y)&&(t="setting"),this.ctx.stroke(),this.ctx.restore(),t}},{key:"getPosition",value:function(e){return{x:e.clientX-this.can.offsetLeft,y:e.clientY-this.can.offsetTop}}}]),e}();e.exports=r}]);