!function(t){function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=4)}([,,,,function(t,i,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),s=e(5),h=a(s),o=e(6),b=a(o),u=e(7),l=a(u),g=e(8),y=a(g),c=e(9),f=a(c),m=e(10),d=a(m),p=e(11),v=a(p),w=e(12),x=a(w),T=e(13),E=a(T),I=e(14),B=a(I);e(15);var C=function(){function t(){n(this,t),this.can1=document.getElementById("canvas1"),this.ctx1=this.can1.getContext("2d"),this.can2=document.getElementById("canvas2"),this.ctx2=this.can2.getContext("2d"),this.mx=0,this.my=0,this.bgPic=new Image,this.bgPic.src="./img/tinyHeart/background.jpg",this.canWidth=this.can1.width,this.canHeight=this.can1.height,this.lastTime=Date.now(),this.deltaTime=0,this.fruit=new l.default(this),this.ane=new b.default(this),this.mom=new y.default(this),this.baby=new f.default(this),this.data=new v.default(this),this.wave=new x.default(this),this.halo=new E.default(this),this.dust=new B.default(this);var i=this;this.can1.addEventListener("mousemove",function t(e){if(i.data.gameOver)return void i.can1.removeEventListener("mousemove",t);(e.offSetX||e.layerX)&&(i.mx=void 0===e.offSetX?e.layerX:e.offSetX,i.my=void 0===e.offSetY?e.layerY:e.offSetY)},!1)}return r(t,[{key:"game",value:function(){function t(){window.requestAnimFrame(t);var e=Date.now();i.deltaTime=e-i.lastTime,i.lastTime=e,i.deltaTime>50&&(i.deltaTime=50),i.drawBackground(),i.ane.draw(),i.fruit.draw(),i.fruit.fruitMonitor(),i.ctx1.clearRect(0,0,i.canWidth,i.canWidth),i.mom.draw(),i.baby.draw(),i.data.draw(),i.wave.draw(),i.halo.draw(),i.dust.draw(),d.default.momFruitsCollision(i.fruit,i.mom,i.data,i.wave),d.default.momBabyColllision(i.mom,i.baby,i.data,i.halo)}var i=this;this.ane.init(),this.fruit.init(),this.mom.init(),this.baby.init(),this.dust.init(),this.ctx1.font="30px Verdana",this.ctx1.textAlign="center",t()}},{key:"drawBackground",value:function(){this.ctx2.drawImage(this.bgPic,0,0,this.canWidth,this.canHeight)}}]),t}(),k=new C,M=["baby.png","babyEye0.png","babyEye1.png","babyFade0.png","babyFade1.png","babyFade10.png","babyFade11.png","babyFade12.png","babyFade13.png","babyFade14.png","babyFade15.png","babyFade16.png","babyFade17.png","babyFade18.png","babyFade19.png","babyFade2.png","babyFade3.png","babyFade4.png","babyFade5.png","babyFade6.png","babyFade7.png","babyFade8.png","babyFade9.png","babyTail0.png","babyTail1.png","babyTail2.png","babyTail3.png","babyTail4.png","babyTail5.png","babyTail6.png","babyTail7.png","background.jpg","big.png","bigEat0.png","bigEat1.png","bigEat2.png","bigEat3.png","bigEat4.png","bigEat5.png","bigEat6.png","bigEat7.png","bigEatBlue0.png","bigEatBlue1.png","bigEatBlue2.png","bigEatBlue3.png","bigEatBlue4.png","bigEatBlue5.png","bigEatBlue6.png","bigEatBlue7.png","bigEye0.png","bigEye1.png","bigSwim0.png","bigSwim1.png","bigSwim2.png","bigSwim3.png","bigSwim4.png","bigSwim5.png","bigSwim6.png","bigSwim7.png","bigSwimBlue0.png","bigSwimBlue1.png","bigSwimBlue2.png","bigSwimBlue3.png","bigSwimBlue4.png","bigSwimBlue5.png","bigSwimBlue6.png","bigSwimBlue7.png","bigTail0.png","bigTail1.png","bigTail2.png","bigTail3.png","bigTail4.png","bigTail5.png","bigTail6.png","bigTail7.png","blue.png","cover.png","dust0.png","dust1.png","dust2.png","dust3.png","dust4.png","dust5.png","dust6.png","fruit.png","play.png"],P=document.getElementById("progress"),S=M.length;new h.default(M,function(t){P.innerHTML=Math.round((t+1)/S*100)+"%"},function(){console.log("全部加载完成"),P.style.display="none",document.getElementById("allcanvas").style.display="block",k.game()})._unorderes()},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,t),this.imgs="string"==typeof i?[i]:i,this.each=e,this.all=n}return n(t,[{key:"_unorderes",value:function(){function t(){e&&e(i),i>=n-1&&a&&a(),i++}var i=0,e=this.each,a=this.all,n=this.imgs.length;this.imgs.forEach(function(i){if("string"==typeof i){var e=new Image;e.src="./img/tinyHeart/"+i,e.addEventListener("load",t),e.addEventListener("error",t)}})}},{key:"_orderes",value:function(){function t(){var t=new Image;t.src="./img/tinyHeart/"+s[e],t.addEventListener("load",i),t.addEventListener("error",i)}function i(){a&&a(e),e++,e>=r?n&&n():t()}var e=0,a=this.each,n=this.all,r=this.imgs.length,s=this.imgs;t()}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.alpha=0,this.that=i,this.h=i.can1.height}return n(t,[{key:"init",value:function(){for(var t=0;t<this.num;t++)this.rootx[t]=16*t+20*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=this.h-250+50*Math.random(),this.amp[t]=50*Math.random()+50}},{key:"draw",value:function(){var t=this.that;this.alpha+=.001*t.deltaTime;var i=Math.sin(this.alpha);t.ctx2.save(),t.ctx2.globalAlpha=.6,t.ctx2.lineWidth=20,t.ctx2.lineCap="round",t.ctx2.strokeStyle="#3b154e";for(var e=0;e<this.num;e++)t.ctx2.beginPath(),t.ctx2.moveTo(this.rootx[e],this.h),this.headx[e]=this.rootx[e]+i*this.amp[e],t.ctx2.quadraticCurveTo(this.rootx[e],this.h-100,this.headx[e],this.heady[e]),t.ctx2.stroke();t.ctx2.restore()}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.num=30,this.alive=[],this.that=i,this.orange=new Image,this.blue=new Image,this.x=[],this.y=[],this.aneNo=[],this.l=[],this.spd=[],this.fruitType=[]}return n(t,[{key:"init",value:function(){for(var t=0;t<this.num;t++)this.alive[t]=!1,this.x[t]=0,this.y[t]=0,this.aneNo[t]=0,this.spd[t]=.017*Math.random()+.003,this.fruitType[t]="";this.orange.src="./img/tinyHeart/fruit.png",this.blue.src="./img/tinyHeart/blue.png"}},{key:"draw",value:function(){for(var t=this.that,i=0;i<this.num;i++)this.alive[i]&&(this.l[i]<=14?(this.x[i]=t.ane.headx[this.aneNo[i]],this.y[i]=t.ane.heady[this.aneNo[i]],this.l[i]+=this.spd[i]*t.deltaTime):this.y[i]-=7*this.spd[i]*t.deltaTime,t.ctx2.drawImage(this[this.fruitType[i]],this.x[i]-.5*this.l[i],this.y[i]-.5*this.l[i],this.l[i],this.l[i]),this.y[i]<10&&(this.alive[i]=!1))}},{key:"born",value:function(t){var i=this.that;this.aneNo[t]=Math.floor(Math.random()*i.ane.num),this.l[t]=0,this.alive[t]=!0,this.fruitType[t]="orange",Math.random()<.2&&(this.fruitType[t]="blue")}},{key:"dead",value:function(t){this.alive[t]=!1,this.x[t]=0,this.y[t]=0}},{key:"fruitMonitor",value:function(){for(var t=0,i=0;i<this.num;i++)this.alive[i]&&t++;t<15&&this.sendFruit()}},{key:"sendFruit",value:function(){for(var t=0;t<this.num;t++)if(!this.alive[t]){this.born(t);break}}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.angle=0,this.bigEyeImg=new Image,this.bigBobyImg=new Image,this.bigTailImg=new Image,this.bigEye=[],this.bigBoby=[],this.bigTail=[],this.bigTailTimer=0,this.bigTailCount=0,this.bigEyeTimer=0,this.bigEyeCount=0,this.bigEyeInterval=1e3,this.bigBodyTimer=0,this.bigBodyCount=0,this.that=i}return n(t,[{key:"init",value:function(){this.x=.5*this.that.canWidth,this.y=.5*this.that.canHeight;for(var t=0;t<8;t++)this.bigTail[t]="./img/tinyHeart/bigTail"+t+".png";for(var i=0;i<2;i++)this.bigEye[i]="./img/tinyHeart/bigEye"+i+".png";for(var e=0;e<8;e++)this.bigBoby[e]="./img/tinyHeart/bigSwim"+e+".png";for(var a=8;a<16;a++)this.bigBoby[a]="./img/tinyHeart/bigSwimBlue"+(a-8)+".png"}},{key:"draw",value:function(){var t=this.that;this.x=lerpDistance(t.mx,this.x,.9),this.y=lerpDistance(t.my,this.y,.9);var i=t.my-this.y,e=t.mx-this.x,a=Math.atan2(i,e)+Math.PI;this.angle=lerpAngle(a,this.angle,.6),this.bigTailTimer+=t.deltaTime,this.bigTailTimer>90&&(this.bigTailCount=(this.bigTailCount+1)%8,this.bigTailTimer%=90),this.bigEyeTimer+=t.deltaTime,this.bigEyeTimer>this.bigEyeInterval&&(this.bigEyeCount=(this.bigEyeCount+1)%2,this.bigEyeTimer%=this.bigEyeInterval,0===this.bigEyeCount?this.bigEyeInterval=1500*Math.random()+2e3:this.bigEyeInterval=200),this.bigTailImg.src=this.bigTail[this.bigTailCount],this.bigBobyImg.src=this.bigBoby[this.bigBodyCount],this.bigEyeImg.src=this.bigEye[this.bigEyeCount],t.ctx1.save(),t.ctx1.translate(this.x,this.y),t.ctx1.rotate(this.angle),t.ctx1.drawImage(this.bigTailImg,.5*-this.bigTailImg.width+30,.5*-this.bigTailImg.height,this.bigTailImg.width,this.bigTailImg.height),t.ctx1.drawImage(this.bigBobyImg,.5*-this.bigBobyImg.width,.5*-this.bigBobyImg.height,this.bigBobyImg.width,this.bigBobyImg.height),t.ctx1.drawImage(this.bigEyeImg,.5*-this.bigEyeImg.width,.5*-this.bigEyeImg.height,this.bigEyeImg.width,this.bigEyeImg.height),t.ctx1.restore()}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.angle=0,this.babyEye=[],this.babyBoby=[],this.babyTail=[],this.babyEyeImg=new Image,this.babyBobyImg=new Image,this.babyTailImg=new Image,this.babyTailTimer=0,this.babyTailCount=0,this.babyEyeTimer=0,this.babyEyeCount=0,this.babyEyeInterval=1e3,this.babyBodyTimer=0,this.babyBodyCount=0,this.that=i}return n(t,[{key:"init",value:function(){this.x=.5*this.that.canWidth-50,this.y=.5*this.that.canHeight+50;for(var t=0;t<8;t++)this.babyTail[t]="./img/tinyHeart/babyTail"+t+".png";for(var i=0;i<2;i++)this.babyEye[i]="./img/tinyHeart/babyEye"+i+".png";for(var e=0;e<20;e++)this.babyBoby[e]="./img/tinyHeart/babyFade"+e+".png"}},{key:"draw",value:function(){var t=this.that;this.x=lerpDistance(t.mom.x-35,this.x,.98),this.y=lerpDistance(t.mom.y-35,this.y,.98);var i=t.mom.y-this.y,e=t.mom.x-this.x,a=Math.atan2(i,e)+Math.PI;this.angle=lerpAngle(a,this.angle,.6),this.babyTailTimer+=t.deltaTime,this.babyTailTimer>100&&(this.babyTailCount=(this.babyTailCount+1)%8,this.babyTailTimer%=100),this.babyEyeTimer+=t.deltaTime,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeCount=(this.babyEyeCount+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0===this.babyEyeCount?this.babyEyeInterval=1500*Math.random()+2e3:this.babyEyeInterval=200),this.babyBodyTimer+=t.deltaTime,this.babyBodyTimer>750&&(this.babyBodyCount=this.babyBodyCount+1,this.babyBodyTimer%=750,this.babyBodyCount>19&&(this.babyBodyCount=19,t.data.gameOver=!0)),this.babyTailImg.src=this.babyTail[this.babyTailCount],this.babyBobyImg.src=this.babyBoby[this.babyBodyCount],this.babyEyeImg.src=this.babyEye[this.babyEyeCount],t.ctx1.save(),t.ctx1.translate(this.x,this.y),t.ctx1.rotate(this.angle),t.ctx1.drawImage(this.babyTailImg,.5*-this.babyTailImg.width+30,.5*-this.babyTailImg.height,this.babyTailImg.width,this.babyTailImg.height),t.ctx1.drawImage(this.babyBobyImg,.5*-this.babyBobyImg.width,.5*-this.babyBobyImg.height,this.babyBobyImg.width,this.babyBobyImg.height),t.ctx1.drawImage(this.babyEyeImg,.5*-this.babyEyeImg.width,.5*-this.babyEyeImg.height,this.babyEyeImg.width,this.babyEyeImg.height),t.ctx1.restore()}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i,e,a){if(!e.gameOver)for(var n=0;n<t.num;n++)if(t.alive[n]){var r=calLength2(t.x[n],t.y[n],i.x,i.y);if(r<900){a.born(t.x[n],t.y[n]),"blue"===t.fruitType[n]&&Math.log(e.double)/Math.log(2)<8?(e.double*=2,i.bigBodyCount=7+Math.log(e.double)/Math.log(2)):e.fruitNum<8?(e.fruitNum++,i.bigBodyCount=e.fruitNum):(e.fruitNum++,i.bigBodyCount=7),t.dead(n);break}}}function n(t,i,e,a){if(!e.gameOver){calLength2(t.x,t.y,i.x,i.y)<900&&e.fruitNum&&(i.babyBodyCount=0,t.bigBodyCount=0,e.addScore(),a.born(i.x,i.y))}}Object.defineProperty(i,"__esModule",{value:!0}),i.default={momFruitsCollision:a,momBabyColllision:n}},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.fruitNum=0,this.double=1,this.score=0,this.gameOver=!1,this.alpha=0,this.that=i}return n(t,[{key:"draw",value:function(){var t=this.that,i=t.can1.width,e=t.can1.height;t.ctx1.save(),t.ctx1.shadowBlur=10,t.ctx1.shadowColor="white",t.ctx1.fillStyle="white",t.ctx1.fillText("SCORE "+this.score,.5*i,e-20),this.gameOver&&(this.alpha+=.005,this.alpha>1&&(this.alpha=1),t.ctx1.fillStyle="rgba(255, 255, 255, "+this.alpha+")",t.ctx1.fillText("GAMEOVER ",.5*i,.5*e)),t.ctx1.restore()}},{key:"addScore",value:function(){this.score+=this.fruitNum*this.double,this.fruitNum=0,this.double=1}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.x=[],this.y=[],this.num=10,this.alive=new Array(this.num).fill(!1),this.r=[],this.that=i}return n(t,[{key:"draw",value:function(){var t=this.that;t.ctx1.save(),t.ctx1.lineWidth=2,t.ctx1.shadowBlur=10,t.ctx1.shadowColor="white";for(var i=0;i<this.num;i++)if(this.alive[i]){if(this.r[i]+=.04*t.deltaTime,this.r[i]>50){this.alive[i]=!1;break}var e=1-this.r[i]/50;t.ctx1.beginPath(),t.ctx1.arc(this.x[i],this.y[i],this.r[i],0,2*Math.PI),t.ctx1.closePath(),t.ctx1.strokeStyle="rgba(255, 255, 255,"+e+")",t.ctx1.stroke()}t.ctx1.restore()}},{key:"born",value:function(t,i){for(var e=0;e<this.num;e++)if(!this.alive[e])return this.alive[e]=!0,this.r[e]=20,this.x[e]=t,void(this.y[e]=i)}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.x=new Array(this.num).fill(0),this.y=new Array(this.num).fill(0),this.num=5,this.alive=new Array(this.num).fill(!1),this.r=new Array(this.num).fill(0),this.that=i}return n(t,[{key:"draw",value:function(){var t=this.that;t.ctx1.save(),t.ctx1.lineWidth=2,t.ctx1.shadowBlur=10,t.ctx1.shadowColor="rgba(203, 91, 0, 1)";for(var i=0;i<this.num;i++)if(this.alive[i]){if(this.r[i]+=.05*t.deltaTime,this.r[i]>100){this.alive[i]=!1;break}var e=1-this.r[i]/100;t.ctx1.beginPath(),t.ctx1.arc(this.x[i],this.y[i],this.r[i],0,2*Math.PI),t.ctx1.closePath(),t.ctx1.strokeStyle="rgba(203, 91, 0,"+e+")",t.ctx1.stroke()}t.ctx1.restore()}},{key:"born",value:function(t,i){for(var e=0;e<this.num;e++)if(!this.alive[e])return this.alive[e]=!0,this.r[e]=20,this.x[e]=t,void(this.y[e]=i)}}]),t}();t.exports=r},function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),r=function(){function t(i){a(this,t),this.x=[],this.y=[],this.amp=[],this.NO=[],this.dustPic=[],this.num=30,this.alpha=0,this.that=i}return n(t,[{key:"init",value:function(){for(var t=this.that.canHeight,i=this.that.canWidth,e=0;e<this.num;e++)this.x[e]=Math.random()*t,this.y[e]=Math.random()*i,this.amp[e]=20+15*Math.random(),this.NO[e]=Math.floor(7*Math.random());for(var e=0;e<7;e++)this.dustPic[e]=new Image,this.dustPic[e].src="./img/tinyHeart/dust"+e+".png"}},{key:"draw",value:function(){var t=this.that;this.alpha+=8e-4*t.deltaTime;for(var i=Math.sin(this.alpha),e=0;e<this.num;e++){var a=this.NO[e];t.ctx1.drawImage(this.dustPic[a],this.x[e]+this.amp[e]*i,this.y[e],this.dustPic[a].width,this.dustPic[a].height)}}}]),t}();t.exports=r},function(t,i){}]);